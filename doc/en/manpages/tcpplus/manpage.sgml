<refmeta>
  <refentrytitle>tcpplus</refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo class="software">TenDRA</refmiscinfo>
  <refmiscinfo class="date">$TenDRA$</refmiscinfo>
  <refmiscinfo class="sectdesc">TenDRA</refmiscinfo>
</refmeta>

<refnamediv id='tcpplus-name'>
  <refname>tcpplus</refname>
  <refpurpose>C++ to TDF/ANDF producer</refpurpose>
</refnamediv>

<refsynopsisdiv id='tcpplus-synopsis'>
  <cmdsynopsis>
    <command>tcpplus</command> 
    <arg choice='opt'><replaceable>options</replaceable></arg>
    <arg choice='opt'><replaceable>input-file</replaceable></arg>
    <arg choice='opt'><replaceable>output-file</replaceable></arg>
  </cmdsynopsis>
</refsynopsisdiv>


<refsect1 id='tcpplus-description'>
  <title>DESCRIPTION</title> 

  <para>In its default action, <command>tcpplus</command> translates the
    input C++ source file, <emphasis>input-file</emphasis>, into a TDF/ANDF
    capsule, <emphasis>output-file</emphasis>. If the output file name is
    omitted or is <emphasis>-</emphasis>, the standard output is used. If the
    input file name is omitted or is <emphasis>-</emphasis>, the standard
    input is used.</para>

  <para>By use of the
    <option>-s</option><replaceable>spec-file</replaceable> option,
    <command>tcpplus</command> can additionally be made to output a C++ spec
    file which contains information enabling intermodule analysis to be
    performed. Alternatively usage and error information suitable for
    processing by other tools can be output using the
    <option>-d</option><replaceable>opt</replaceable><emphasis>=</emphasis><emphasis>
    dump-file</emphasis> option.</para>

  <para><command>tcpplus</command> also has a preprocessing action, when
    invoked with the <option>-E</option> option, in which the input C++
    source file, <emphasis>input-file</emphasis>, is preprocessed to an
    output file, <emphasis>ouput-file</emphasis>.</para>

  <para>Finally <command>tcpplus</command> has a spec linker action, when
    invoked with the <option>-S</option> option, in which any number of spec
    input files, <emphasis>input-file</emphasis>, are combined into a spec
    output file, which may be specified using the <option>-s</option> option.
    Any extra code generation resulting from this linking phase is written to
    the TDF capsule, <emphasis>output-file</emphasis>.</para>

  <para>It is recommended that <command>tcpplus</command> is invoked via
    &man.tendra.tcc;. The <option>-Yc++</option> option is required to enable
    the C++ capabilities. Files with a <markup>.C</markup> suffix are
    recognised as C++ source files. Options can be passed directly to
    <command>tcpplus</command> using the
    <option>-Wx,</option><replaceable>opt</replaceable> option to
    <emphasis>tcc</emphasis>.</para>
</refsect1>

<refsect1 id='tcpplus-options'>
  <title>OPTIONS</title> 

  <para>The command-line options can appear in any order and can be
    interspersed with the input and output files. All the multi-part options
    can be given either as one or two command-line arguments, so that
    <option>-I</option><replaceable>dir</replaceable> and <option>-I</option>
    <replaceable>dir</replaceable> are equivalent. Most of the option
    handling required is handled by &man.tendra.tcc; when this is being used,
    but options may be passed directly to <command>tcpplus</command> using
    the <option>-Wx,</option><replaceable>opt</replaceable> option.</para>

  <variablelist>
    <varlistentry>
      <term><option>-A</option><replaceable>predicate</replaceable><emphasis>
        (</emphasis><emphasis>tokens</emphasis><emphasis>)</emphasis></term>
      <listitem>
        <para>Asserts that the given predicate is true. The special case
          <option>-A-</option> undefines all the built-in predicates (of
          which there are none).</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-D</option><replaceable>macro</replaceable></term> 
      <listitem>
        <para>Defines the given macro to be 1.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-D</option><replaceable>macro</replaceable><emphasis>=</emphasis><emphasis>
        tokens</emphasis></term> 
      <listitem>
        <para>Defines the given macro to be the given sequence of
          preprocessing tokens.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-E</option></term> 
      <listitem>
        <para>Enables preprocessing mode in which the input C++ source file
          is preprocessed into the output file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-F</option><replaceable>file</replaceable></term> 
      <listitem>
        <para>Causes a list of options to be read from
          <emphasis>file</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-H</option></term> 
      <listitem>
        <para>Enables verbose inclusion mode in which warnings are printed
        at the start and the end of each included source file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-I</option><replaceable>directory</replaceable></term> 
      <listitem>
        <para>Adds the given directory to the list searched by
          <command>tcpplus</command> for included source files. No such
          directories are built into <command>tcpplus</command>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-N</option><replaceable>name</replaceable><emphasis>:</emphasis><emphasis>
        directory</emphasis></term> 
      <listitem>
        <para>Is identical to
          <option>-I</option><replaceable>directory</replaceable> except that
          it also associates the given identifier with the directory.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-S</option></term> 
      <listitem>
        <para>Enables spec linker mode in which any number of C++ spec
          input files are linked into a single C++ spec output file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-U</option><replaceable>macro</replaceable></term> 
      <listitem>
        <para>Undefines the given macro. The special case
          <option>-U-</option> undefines all the built-in macros. These are
          <emphasis>__FILE__</emphasis>, <emphasis>__LINE__</emphasis>,
          <emphasis>__TIME__</emphasis>, <emphasis>__DATE__</emphasis>,
          <emphasis>__STDC__</emphasis>,
          <emphasis>__STDC_VERSION__</emphasis>, and
          <emphasis>__cplusplus</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-V</option></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to print the name of each
          function to the standard output as it is compiled.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-W</option><replaceable>option</replaceable></term> 

      <listitem>
        <para>Causes <command>tcpplus</command> to print a warning in the
          circumstances described by <emphasis>option</emphasis>. The special
          case <option>-Wall</option> enables a wide range of
          warnings.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-X</option></term> 
      <listitem>
        <para>Disables exception handling. The current implementation can
          be a large run-time overhead if not required. The effect of linking
          any module compiled with this option with a module which throws an
          exception is undefined. This is equivalent to
          <option>-j-e</option>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-Z</option><replaceable>number</replaceable></term> 
      <listitem>
        <para>Sets the maximum number of errors printed by
          <command>tcpplus</command> before bailing out to be
          <emphasis>number</emphasis>. The default is 32.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-a</option></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to apply complete program
          analysis to its input files. That is it assumes that no other
          translation units need to be linked in order for the program to
          execute.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-c</option></term> 
      <listitem>
        <para>Disables TDF output. The output file will still be a valid
          TDF capsule, only it will contain no information. This is
          equivalent to <option>-j-c</option>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-d</option><replaceable>opt</replaceable><emphasis>=</emphasis><emphasis>
        dump-file</emphasis></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to dump information about
          its input file into <emphasis>dump-file</emphasis>.
          <emphasis>opt</emphasis> is a series of characters describing the
          information to be dumped; <emphasis>c</emphasis> for string
          literals, <emphasis>e</emphasis> for errors, <emphasis>h</emphasis>
          for header files, <emphasis>k</emphasis> for keywords,
          <emphasis>l</emphasis> for local variables, <emphasis>m</emphasis>
          for macros, <emphasis>s</emphasis> for scopes, and
          <emphasis>u</emphasis> for usage. <emphasis>a</emphasis> is
          equivalent to <emphasis>ehlmu</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-e</option><replaceable>file</replaceable></term> 
      <listitem>
        <para>Specifies the given file as an end-up file. This is
          equivalent to adding a <emphasis>#include</emphasis> directive for
          this file at the end of the input source file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-f</option><replaceable>file</replaceable></term> 
      <listitem>
        <para>Specifies the given file as a start-up file. This is
          equivalent to adding a <emphasis>#include</emphasis> directive for
          this file at the start of the input source file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-g</option></term> 
      <listitem>
        <para>Specifies that the output TDF capsule should also contain
          information to allow for the generation of run-time debugging
          directives. This is equivalent to <option>-jg</option>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-h</option></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to print a full list of its
          available command-line options. This includes a number not
          documented here which are unlikely to prove useful to the normal
          user.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-j</option><replaceable>opt</replaceable></term> 
      <listitem>
        <para>Sets the TDF output options given by
          <emphasis>opt</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-m</option><replaceable>opt</replaceable></term> 
      <listitem>
        <para>Sets the error formatting options given by
          <emphasis>opt</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-n</option><replaceable>port-table</replaceable></term>
      <listitem>
        <para>Specifies that the given portability table should be used to
          specify the basic configuration parameters.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-o</option><replaceable>output-file</replaceable></term>
      <listitem>
        <para>Gives an alternative method of specifying the output
          file.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-q</option></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to quit immediately without
          processing its input file. This is useful primarily in version and
          option queries.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-s</option><replaceable>spec-file</replaceable></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to write a C++ spec file
          describing the input source file to
          <emphasis>spec-file</emphasis>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-t</option></term> 
      <listitem>
        <para>Specifies that <command>tcpplus</command> should include
          token declarations in its output TDF capsule. While these are
          strictly unnecessary, they help when pretty-printing the output.
          This is equivalent to <option>-jt</option>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-u</option><replaceable> name ... name</replaceable></term>
      <listitem>
        <para>Causes <command>tcpplus</command> to print the unmangle forms
          of the given mangled identifier names.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-v</option></term> 
      <listitem>
        <para>Causes <command>tcpplus</command> to print its version
          number.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-w</option></term> 
      <listitem>
        <para>Disables all warning messages. This is equivalent to
          <option>-mw</option>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><option>-z</option></term> 
      <listitem>
        <para>Forces <command>tcpplus</command> to produce an output file
          even if compilation errors occur. The effect of installing a TDF
          capsule produced using this option is undefined. This is equivalent
          to <option>-mz</option>.</para>
      </listitem>
    </varlistentry>
  </variablelist>
</refsect1>

<refsect1 id='tcpplus-seealso'>
  <title>SEE ALSO</title> 
  <para>&man.tendra.tcc;, &man.tendra.tdfc;.</para>
</refsect1>
